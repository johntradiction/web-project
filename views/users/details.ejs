<!DOCTYPE html>
<html>

<head>
  <title>User Details</title>
  <link rel='stylesheet' href='/stylesheets/style.css' />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>
  <script type="text/javascript" src="/javascripts/edit_user.js"></script>
  <script type="text/javascript" src="/javascripts/delete_user.js"></script>
</head>

<body>
  <nav class="navbar navbar-light bg-primary">  
    <form class="form-inline">
      <a class="navbar-brand text-light" href="/..">Contact Management</a>
      <input type="button" class="btn btn-primary btn-outline-light" style="margin: 5px" value="Index" onclick="location.href = '../../users';">
      <input type="button" class="btn btn-primary btn-outline-light" style="margin: 5px" value="New" onclick="location.href = '../../users/user';">
    </form>
  </nav>   
  <divrow class="row">
    <div class="col-4"></div>
    <div class="col-4">
      <div class="card">
        <div class="card-header">
          Contact
        </div>
        <div class="card-text px-4">
          <br>
          <label class="pr-2">Name:</label> <span class="bg-primary text-light px-1 rounded"><%= user.name%></span>
          <br><br>
          <label class="pr-2">Email:</label> <span class="bg-primary text-light px-1 rounded"><%= user.email%></span>
          <br><br>
          <label class="pr-2">Phone:</label> <span class="bg-primary text-light px-1 rounded"><%= user.phone%></span>
          <br><br>
        </div>
        <div class="card-footer">
          <a href="/users/user/<%= user._id%>" class="btn btn-outline-warning" role="button" aria-disabled="true">Edit</a>
          <a class="btn btn-outline-danger" data-uid="<%= user._id%>" onclick="clickHandler()">Delete</a>
        </div>
      </div>
    <div class="col-4"></div>
    </div>
  </divrow>
</body>
<script>

function clickHandler() {

  if (confirm("Are you sure?")) {
    const uid = "<%= user._id%>";
    console.log("delete: ", uid);
    deleteUser(uid);
    const requesthome = $.ajax({
        url: '../users/',
        type: 'get'
      });

      setTimeout('window.location.replace("../");', 1000);
  } else {
    txt = "You pressed Cancel!";
  }
}
</script>
</html>